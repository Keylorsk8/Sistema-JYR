@model Sistema_JYR.Models.IndexViewModel
@using Microsoft.AspNet.Identity
@using Sistema_JYR.Models
@{
    ViewBag.Title = "Administrar";
    Sistema_JYR.Models.AspNetUsers usuario = new AspNetUsers();
    SistemaJYREntities db = new SistemaJYREntities();
    string id = HttpContext.Current.User.Identity.GetUserId();
    usuario = db.AspNetUsers.Where(x => x.Id == id).First();
}

<div class="container" style="padding: 25px">
    <h2>@ViewBag.Title.</h2>
    <h4>Cambiar la configuración de la cuenta</h4>
    <hr />
    <h1>@usuario.Nombre @usuario.Apellido1 @usuario.Apellido2</h1>
    @if (usuario.Rol == 1)
    {
        <h5>Administrador</h5>
    }
    else if (usuario.Rol == 2)
    {
        <h5>Vendedor</h5>
    }

    <dl class="<dl></dl>-horizontal">
        <dt>Contraseña:</dt>
        <dd>
            @if (Model.HasPassword)
            {
                @Html.ActionLink("Cambiar la contraseña", "ChangePassword")
            }
            else
            {
                @Html.ActionLink("Crear", "SetPassword")
            }
        </dd>
        <dt>Inicios de sesión externos:</dt>
        <dd>
            @Html.ActionLink("Administrar", "ManageLogins")
            | @Model.Logins.Count Sincronizados
        </dd>

        <dt>Número de teléfono:</dt>
        <dd>
            @(Model.PhoneNumber ?? "Ninguno")
            @if (Model.PhoneNumber != null)
            {
                <br />
                <text>[&nbsp;&nbsp;@Html.ActionLink("Change", "AddPhoneNumber")&nbsp;&nbsp;]</text>
                using (Html.BeginForm("RemovePhoneNumber", "Manage", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                {
                    @Html.AntiForgeryToken()
                    <text>[<input type="submit" value="Quitar" class="btn-link" />]</text>
                }
            }
            else
            {
                @Html.ActionLink("Agregar", "AddPhoneNumber")
            }
        </dd>

        <dt>Direcciones de entrega</dt>
        <dd>
            @(Model.PhoneNumber ?? "Ninguno")
            @Html.ActionLink("Agregar", "AddPhoneNumber")
        </dd>

        <dt>Autenticación de dos factores:</dt>
        <dd>
            <p>
                No hay ningún proveedor de autenticación en dos fases configurado. Consulte <a href="https://go.microsoft.com/fwlink/?LinkId=403804">este artículo</a>
                para obtener detalles sobre cómo configurar esta aplicación ASP.NET para que sea compatible con la autenticación en dos fases.
            </p>
            @if (Model.TwoFactor)
            {
                using (Html.BeginForm("DisableTwoFactorAuthentication", "Manage", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                {
                    @Html.AntiForgeryToken()
                    <text>Habilitado
                        <input type="submit" value="Deshabilitar" class="btn btn-link" />
                    </text>
                }
            }
            else
            {
                using (Html.BeginForm("EnableTwoFactorAuthentication", "Manage", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                {
                    @Html.AntiForgeryToken()
                    <text>Deshabilitada
                        <input type="submit" value="Habilitar" class="btn btn-link" />
                    </text>
                }
            }
        </dd>
    </dl>
</div>
